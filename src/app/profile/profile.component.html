<app-header></app-header>
<div class="container">
  <h1>Edit Profile:</h1>
  <hr>
  <div class="row">
    <div class="col-md-3" [formGroup]="profileForm">
      <div class="text-center">
        <img src="{{user.avatar}}" class="avatar img-circle" alt="avatar">
        <h6>Upload a different photo...</h6>
        <input [ngClass]="{'error':profileForm.controls.avatar.invalid}" (change)="onChange($event)" type="file"
               class="form-control" formControlName="avatar">
      </div>
    </div>
    <div class="col-md-9 personal-info">
      <h3>Profile:</h3>
      <form class="form-horizontal" role="form" [formGroup]="profileForm" novalidate>
        <div class="form-group">
          <label class="col-lg-3 control-label">First name:</label>
          <div class="col-lg-8">
            <input [ngClass]="{'error':profileForm.controls.first_name.invalid}" class="form-control" type="text"
                   formControlName="first_name">
            <div *ngIf="profileForm.controls.first_name.invalid">
              <app-error-handler [errors]="profileForm.controls.first_name.errors"
                                 [formFieldName]='first_name'></app-error-handler>
            </div>
          </div>

        </div>
        <div class="form-group">
          <label class="col-lg-3 control-label">Last name:</label>
          <div class="col-lg-8">
            <input [ngClass]="{'error':profileForm.controls.last_name.invalid}" class="form-control" type="text"
                   formControlName="last_name">
            <div *ngIf="profileForm.controls.last_name.invalid">
              <app-error-handler [errors]="profileForm.controls.last_name.errors"
                                 [formFieldName]='last_name'></app-error-handler>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-lg-3 control-label">Email:</label>
          <div class="col-lg-8">
            <input disabled class="form-control" type="text" formControlName="email">
          </div>
        </div>
        <div class="form-group">
          <label class="col-md-3 control-label">Username:</label>
          <div class="col-md-8">
            <input [ngClass]="{'error':profileForm.controls.username.invalid}" class="form-control" type="text"
                   formControlName="username">
            <div *ngIf="profileForm.controls.username.invalid">
              <app-error-handler [errors]="profileForm.controls.username.errors"
                                 [formFieldName]='username'></app-error-handler>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label class="col-md-3 control-label"></label>
          <div class="col-md-8">
            <button type="button" class="btn" value="Save Changes" (click)="patch()">Save changes</button>
            <span></span>
            <button type="button" class="btn btn-default">Cancel</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<app-footer></app-footer>
